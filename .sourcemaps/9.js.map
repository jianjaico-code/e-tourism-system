{"version":3,"sources":["../../src/pages/tourist-places/tourist-places.module.ts","../../src/pages/tourist-places/tourist-places.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TouristPlacesPage } from './tourist-places';\n\n@NgModule({\n  declarations: [\n    TouristPlacesPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TouristPlacesPage),\n  ],\n})\nexport class TouristPlacesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tourist-places/tourist-places.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, Platform, NavController, NavParams, AlertController } from 'ionic-angular';\nimport * as firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-tourist-places',\n  templateUrl: 'tourist-places.html',\n})\nexport class TouristPlacesPage {\n\n  establishments: Array<any>;\n  loadedEst: Array<any>;\n  mobile: boolean;\n\n  constructor(public platform: Platform, public navCtrl: NavController, public alertCtrl: AlertController, public navParams: NavParams) {\n    if (this.platform.is('mobile')) {\n      this.mobile = true;\n    }\n    else{\n      this.mobile = false;\n    }\n    this.getEstablishments(100);\n  }\n\n  getEstablishments(element){\n    let ref = firebase.database().ref('establishment');\n    let catRef = firebase.database().ref('category');\n    ref.on('value', data => {\n      let arr = [];\n      data.forEach(data => {\n        catRef.once('value', category => {\n          category.forEach( category => {\n            if(category.val().cat_val == data.val().category){\n              if(data.val().status == 1){\n                let info = {\n                  key: data.key,\n                  name: data.val().name,\n                  address: data.val().address,\n                  peopleRated: data.val().peopleRated,\n                  averageRate: data.val().averageRate,\n                  description: data.val().description,\n                  latitude: data.val().latitude,\n                  longitude: data.val().longitude,\n                  permits: data.val().permits,\n                  imageurl: data.val().images,\n                  category: category.val().name,\n                  phone: data.val().phone,\n                  status: data.val().status,\n                  website: data.val().website,\n                  userEmail: data.val().userEmail,\n                  userType: data.val().userType\n                }\n               if(element == category.val().cat_val){\n                  if(info.category == category.val().name){\n                    arr.push(info);\n                  }\n                }\n                else if(element == 100){\n                  arr.push(info);\n                }\n              }\n            }\n          });\n        });\n        return false;\n      });\n      this.establishments = arr.sort((a, b) => parseFloat(a.averageRate) - parseFloat(b.averageRate)).reverse();\n      this.loadedEst = arr.sort((a, b) => parseFloat(a.averageRate) - parseFloat(b.averageRate)).reverse();\n      console.log(this.establishments);\n    });\n  }\n\n  initializeItem(): void{\n    this.establishments = this.loadedEst;\n  }\n\n  getItems(searchbar){\n    this.initializeItem();\n    let q = searchbar.srcElement.value;\n\n    if(!q){\n      return;\n    }\n\n    this.establishments = this.establishments.filter(data => {\n      if(data.name && q){\n        if(data.name.toLowerCase().indexOf(q.toLowerCase()) > -1){\n          return true;\n        }\n        return false;\n      }\n    });\n  }\n\n  filterEst(){\n    let ref = firebase.database().ref('category');\n    let alert = this.alertCtrl.create();\n    alert.setTitle('Category');\n    ref.on('value', snapshot => {\n      snapshot.forEach(snapshot => {\n        alert.addInput({\n          type: 'radio',\n          label: snapshot.val().name,\n          value: snapshot.val().cat_val,\n          checked: false\n        });\n      });\n    });\n\n    alert.addButton('Cancel');\n    alert.addButton({\n      text: 'OK',\n      handler: data => {\n        this.getEstablishments(data);\n      }\n    });\n    alert.present();\n  }\n\n  pushEst(key){\n    this.navCtrl.setRoot('EstablishmentPage', key);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tourist-places/tourist-places.ts"],"sourceRoot":""}