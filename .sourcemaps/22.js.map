{"version":3,"sources":["../../src/pages/func-events/func-events.module.ts","../../src/pages/func-events/func-events.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FuncEventsPage } from './func-events';\n\n@NgModule({\n  declarations: [\n    FuncEventsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FuncEventsPage),\n  ],\n})\nexport class FuncEventsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/func-events/func-events.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController, LoadingController } from 'ionic-angular';\nimport * as firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'page-func-events',\n  templateUrl: 'func-events.html',\n})\nexport class FuncEventsPage {\n\n  @ViewChild('title') title;\n  @ViewChild('desc') desc;\n  selectedFile;\n  imageUrl;\n  validData;\n  status;\n  key;\n  data;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController, public alertCtrl: AlertController, public loadingCtrl: LoadingController) {\n    this.key = navParams.data.key;\n    this.status = navParams.data.status;\n    this.initPost();\n  }\n\n  initPost(){\n    if(this.status == true){\n      let ref = firebase.database().ref('event');\n      ref.on('value', data => {\n        data.forEach(data => {\n          if(data.key == this.key){\n            this.data = {\n              title: data.val().title,\n              description: data.val().description,\n              name: data.val().name,\n              date: data.val().date,\n              image: data.val().image\n            }  \n          }\n        });\n        console.log(this.data);\n      });\n    }\n    else{\n      console.log(\"This is not a data formed\");\n    }\n  }\n\n  closeModal(){\n    this.viewCtrl.dismiss();\n  }\n\n  detectFiles(event) {\n    this.selectedFile = event.target.files[0];\n    console.log(this.selectedFile);\n  }\n\n  checkData(key){\n    if(key){\n      if(this.title.value == \"\"){\n        this.validData = true;\n        let alert = this.alertCtrl.create({\n          title: \"Attention\",\n          subTitle: \"Event Title is Empty\",\n          buttons: ['OK']\n        });\n        alert.present();\n      }\n      else if(this.desc.value == \"\"){\n        this.validData = true;\n        let alert = this.alertCtrl.create({\n          title: \"Attention\",\n          subTitle: \"Event Description is Empty\",\n          buttons: ['OK']\n        });\n        alert.present();\n      }\n      else{this.validData = false;}\n    }\n    else{\n      if(this.data.title == \"\"){\n        this.validData = true;\n        let alert = this.alertCtrl.create({\n          title: \"Attention\",\n          subTitle: \"Event Title is Empty\",\n          buttons: ['OK']\n        });\n        alert.present();\n      }\n      else if(this.data.desc == \"\"){\n        this.validData = true;\n        let alert = this.alertCtrl.create({\n          title: \"Attention\",\n          subTitle: \"Event Description is Empty\",\n          buttons: ['OK']\n        });\n        alert.present();\n      }\n      else{this.validData = false;}\n    }\n  }\n\n  addEvent(){\n    this.checkData(true);\n    if(!this.validData){\n      let loading = this.loadingCtrl.create();\n      loading.present();\n\n      if(this.selectedFile){\n        let file = this.selectedFile;\n        let storageRef = firebase.storage().ref('/Events Picture/' + this.title.value +'/' + file.name);\n        storageRef.put(file).then(snapshot => {\n          return snapshot.ref.getDownloadURL();\n        }).then(downloadURL => {\n            console.log(`Successfully uploaded file and got download link - ${downloadURL}`);\n            this.imageUrl = downloadURL;\n            loading.dismiss().then(() =>{\n              this.viewCtrl.dismiss();\n            });\n            return downloadURL;\n        }).catch(error => {\n            console.log(`Failed to upload file and get link - ${error}`);\n        });\n      }\n      else{\n        this.imageUrl = null;\n        loading.dismiss().then(() =>{\n          this.viewCtrl.dismiss();\n        });\n      }\n\n      loading.onDidDismiss(() => {\n        let ref = firebase.database().ref('event');\n        ref.push({\n          title: this.title.value,\n          description: this.desc.value,\n          image: this.imageUrl\n        }).then(() => {\n          this.viewCtrl.dismiss();\n        });\n      });\n    }\n  }\n\n  editEvent(){\n    this.checkData(false);\n    if(!this.validData){\n      let ref = firebase.database().ref('event/' + this.key);\n      let loading = this.loadingCtrl.create();\n      loading.present();\n\n      if(this.selectedFile){\n        let file = this.selectedFile;\n        let storageRef = firebase.storage().ref('/Events Picture/' + this.data.title  +'/' + file.name);\n        storageRef.put(file).then(snapshot => {\n          return snapshot.ref.getDownloadURL();\n        }).then(downloadURL => {\n            console.log(`Successfully uploaded file and got download link - ${downloadURL}`);\n            this.imageUrl = downloadURL;\n            loading.dismiss().then(() =>{\n              this.viewCtrl.dismiss();\n            });\n            return downloadURL;\n        }).catch(error => {\n            console.log(`Failed to upload file and get link - ${error}`);\n        });\n      }\n      else{\n        this.imageUrl = this.data.image;\n        loading.dismiss().then(() =>{\n          this.viewCtrl.dismiss();\n        });\n      }\n\n      loading.onDidDismiss(() => {\n        ref.set({\n          title: this.data.title,\n          description: this.data.description,\n          image: this.imageUrl\n        }).then(() => {\n          this.viewCtrl.dismiss();\n        });\n      });\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/func-events/func-events.ts"],"sourceRoot":""}