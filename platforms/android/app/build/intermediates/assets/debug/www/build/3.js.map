{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/validators/email.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n  ],\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { FormControl } from '@angular/forms';\r\n\r\nexport class EmailValidator {\r\n  static isValid(control: FormControl) {\r\n    const re = /^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$/.test(\r\n      control.value\r\n    );\r\n\r\n    if (re) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      invalidEmail: true,\r\n    };\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, LoadingController, AlertController, ViewController, NavParams, ModalController, ToastController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { EmailValidator } from '../../validators/email';\nimport * as firebase from 'firebase';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MainPage } from '../main/main';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html',\n})\nexport class SignupPage {\n  public signupForm: FormGroup;\n\n  @ViewChild(\"name\") name;\n  @ViewChild(\"address\") address;\n  @ViewChild(\"usertypeid\") usertypeid;\n  @ViewChild(\"status\") status;\n  @ViewChild(\"email\") email;\n  @ViewChild(\"password\") password;\n  \n  ref;\n  loading;\n\n  validData: boolean;\n\n  constructor(public nav: NavController, private toastCtrl: ToastController, public navParams: NavParams, private modalCtrl: ModalController, private viewCtrl: ViewController, private afAuth: AngularFireAuth, public authData: AuthProvider, public formBuilder: FormBuilder, public loadingCtrl: LoadingController, public alertCtrl: AlertController) {\n    this.signupForm = formBuilder.group({\n      email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n      password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n    });\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n  }\n\n  signupUser(){\n    this.checkData();\n    if (!this.signupForm.valid){\n      console.log(this.signupForm.value);\n    } \n    else {\n      if(!this.validData){\n        this.authData.signupUser(this.signupForm.value.email, this.signupForm.value.password).then(() => {\n          let user = firebase.auth().currentUser;\n          user.updateProfile({\n            displayName: this.name.value,\n            photoURL: \"https://firebasestorage.googleapis.com/v0/b/onlinetourist.appspot.com/o/system%2Fhd-avatar.png?alt=media&token=7b90ff0a-f139-4503-b199-18839ee7bccb\"\n          }).then(function() {\n            console.log(\"Update Successful\");\n          }).catch(function(error) {\n            console.log(\"Erorr in - \" + error);\n          });\n\n          this.ref = firebase.database().ref(`user/` + this.afAuth.auth.currentUser.uid);\n          if(this.usertypeid.value == 2){\n            this.ref.set({\n              email: this.email.value,\n              name: this.name.value,\n              profilePicUrl: \"https://firebasestorage.googleapis.com/v0/b/onlinetourist.appspot.com/o/system%2Fhd-avatar.png?alt=media&token=7b90ff0a-f139-4503-b199-18839ee7bccb\",\n              address: this.address.value,\n              usertypeid: this.usertypeid.value,\n              status: \"2\"\n            }).then(()=>{\n              this.loading.dismiss()\n              let toast = this.toastCtrl.create({\n                message: 'User was added successfully',\n                duration: 3000,\n                position: 'top'\n              });\n              toast.present();\n              this.nav.setRoot(MainPage)\n            });\n          }\n          else{\n            this.ref.set({\n              email: this.email.value,\n              name: this.name.value,\n              profilePicUrl: \"https://firebasestorage.googleapis.com/v0/b/onlinetourist.appspot.com/o/system%2Fhd-avatar.png?alt=media&token=7b90ff0a-f139-4503-b199-18839ee7bccb\",\n              address: this.address.value,\n              usertypeid: this.usertypeid.value,\n              status: \"1\"\n            }).then(()=>{\n              this.loading.dismiss()\n              this.nav.setRoot(MainPage)\n              let toast = this.toastCtrl.create({\n                message: 'User was added successfully',\n                duration: 3000,\n                position: 'top'\n              });\n              toast.present();\n            });\n          }\n        }, (error) => {\n          this.loading.dismiss().then( () => {\n            var errorMessage: string = error.message;\n              let alert = this.alertCtrl.create({\n                message: errorMessage,\n                buttons: [\n                  {\n                    text: \"Ok\",\n                    role: 'cancel'\n                  }\n                ]\n              });\n            alert.present();\n          });\n        });\n        this.loading.present();\n      }\n    }\n  }\n\n  exit(){\n    this.viewCtrl.dismiss();\n  }\n\n  login(){\n    if(this.navParams.data.key){\n      this.viewCtrl.dismiss();\n    }\n    else{\n      let modal = this.modalCtrl.create('LoginPage');\n      modal.present().then(() => {\n        this.viewCtrl.dismiss();\n      });\n    }\n  }\n\n  checkData(){\n    if(this.name.value == \"\"){\n      this.validData = true;\n      let alert = this.alertCtrl.create({\n        title: \"Attention\",\n        subTitle: \"Name is Empty\",\n        buttons: ['OK']\n      });\n      alert.present();\n    }else if(this.address.value == \"\"){\n      this.validData = true;\n      let alert = this.alertCtrl.create({\n        title: \"Attention\",\n        subTitle: \"Address is Empty\",\n        buttons: ['OK']\n      });\n      alert.present();\n    }else if(this.usertypeid.value == \"\"){\n      this.validData = true;\n      let alert = this.alertCtrl.create({\n        title: \"Attention\",\n        subTitle: \"Please choose a Type of Account\",\n        buttons: ['OK']\n      });\n      alert.present();\n    }\n    else{\n      this.validData = false;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}